<!DOCTYPE html>
<html class="dark" lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   HatakeSocial - Ultimate TCG Social Platform | Trading Cards
  </title>
  <meta content="Join the ultimate TCG social platform for Magic, Pokemon, &amp; Yu-Gi-Oh players. Share decks, find tournaments, and connect with a global trading card game community." name="description"/>
  <meta content="TCG social platform, trading card game community, TCG deck builder, Pokemon TCG community, Magic the Gathering social, TCG tournament finder, TCG collection tracker" name="keywords"/>
  <meta content="#9333ea" name="theme-color"/>
  <meta content="yes" name="apple-mobile-web-app-capable"/>
  <meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
  <meta content="HatakeSocial" name="apple-mobile-web-app-title"/>
  <meta content="#9333ea" name="msapplication-TileColor"/>
  <meta content="/browserconfig.xml" name="msapplication-config"/>
  <link href="/manifest.json" rel="manifest"/>
  <link href="/icons/icon-192x192.png" rel="apple-touch-icon" sizes="180x180"/>
  <link href="/icons/icon-32x32.png" rel="icon" sizes="32x32" type="image/png"/>
  <link href="/icons/icon-16x16.png" rel="icon" sizes="16x16" type="image/png"/>
  <link color="#9333ea" href="/icons/safari-pinned-tab.svg" rel="mask-icon"/>
  <meta content="HatakeSocial - The Ultimate TCG Social Platform" property="og:title"/>
  <meta content="The social platform every TCG player needs to build decks, find tournaments, and connect with players worldwide." property="og:description"/>
  <meta content="website" property="og:type"/>
  <meta content="https://www.hatake.eu" property="og:url"/>
  <meta content="https://firebasestorage.googleapis.com/v0/b/hatakesocial-88b5e.firebasestorage.app/o/IMG_7951.png?alt=media&amp;token=e7c2dc48-2836-4feb-9fc7-324aecacba6b" property="og:image"/>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet"/>
  <script src="https://unpkg.com/lucide@latest">
  </script>
  <link href="css/style.css" rel="stylesheet"/>
  <style>
   :root {
            --background-dark: #111827;
            --text-light: #d1d5db;
            --accent-indigo: #4f46e5;
            --accent-pink: #ec4899;
        }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-dark);
            color: var(--text-light);
        }
        .group:hover .group-hover\:block { display: block; }
        .gradient-text {
            background: linear-gradient(to right, var(--accent-indigo), var(--accent-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .gallery-main-image { max-width: 80vw; max-height: 70vh; object-fit: contain; }
        .gallery-arrow { position: absolute; top: 50%; transform: translateY(-50%); cursor: pointer; padding: 1rem; color: white; background-color: rgba(0,0,0,0.5); border-radius: 50%; user-select: none; z-index: 10; }
        .gallery-arrow:hover { background-color: rgba(0,0,0,0.8); }
        .gallery-arrow.left { left: 1rem; }
        .gallery-arrow.right { right: 1rem; }
        #gallery-thumbnails { display: flex; overflow-x: auto; gap: 0.5rem; padding: 0.75rem; width: 100%; max-width: 80vw; scrollbar-width: thin; scrollbar-color: #4f46e5 #1f2937; }
        .gallery-thumbnail { width: 80px; height: 80px; object-fit: cover; cursor: pointer; border-radius: 0.375rem; border: 2px solid transparent; opacity: 0.6; transition: opacity 0.2s ease, border-color 0.2s ease; flex-shrink: 0; }
        .gallery-thumbnail:hover { opacity: 1; }
        .gallery-thumbnail.active { opacity: 1; border-color: #4f46e5; }
        
        /* PWA Install Banner Styles */
        .pwa-install-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            animation: slideDown 0.5s ease-out;
            display: none;
        }
        
        .install-content {
            display: flex;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            gap: 1rem;
        }
        
        .install-icon {
            font-size: 2rem;
            flex-shrink: 0;
        }
        
        .install-text {
            flex: 1;
        }
        
        .install-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        
        .install-description {
            font-size: 0.875rem;
            opacity: 0.9;
        }
        
        .install-actions {
            display: flex;
            gap: 0.75rem;
            flex-shrink: 0;
        }
        
        .install-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .install-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }
        
        .install-btn.primary {
            background: rgba(255, 255, 255, 0.9);
            color: #4f46e5;
        }
        
        .install-btn.primary:hover {
            background: white;
        }
        
        @keyframes slideDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        @media (max-width: 768px) {
            .install-content {
                flex-direction: column;
                text-align: center;
                gap: 0.75rem;
            }
            
            .install-actions {
                width: 100%;
                justify-content: center;
            }
        }
  </style>
 </head>
 <body class="antialiased bg-gray-900">
  <div class="pwa-install-banner" id="pwa-install-banner">
   <div class="install-content">
    <div class="install-icon">
     <i class="fas fa-mobile-alt">
     </i>
    </div>
    <div class="install-text">
     <div class="install-title">
      Install HatakeSocial
     </div>
     <div class="install-description">
      Get the full app experience with offline access and push notifications
     </div>
    </div>
    <div class="install-actions">
     <button class="install-btn primary" id="install-app-btn">
      <i class="fas fa-download">
      </i>
      Install
     </button>
     <button class="install-btn" id="dismiss-install-btn">
      <i class="fas fa-times">
      </i>
      Dismiss
     </button>
    </div>
   </div>
  </div>
  <header class="h-28 flex items-center justify-between px-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0">
   <div class="flex items-center">
    <button class="lg:hidden mr-4 text-gray-600 dark:text-gray-300 p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 touch-manipulation" id="sidebar-toggle" style="min-width: 44px; min-height: 44px;">
       <i class="fas fa-bars text-xl">
       </i>
      </button>
    <div class="relative">
     <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">
     </i>
     <input class="w-full md:w-96 pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-full bg-gray-50 dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500" id="main-search-bar" placeholder="Search for cards, users, or articles..." type="text"/>
    </div>
   </div>
   <div class="flex items-center space-x-5" id="user-actions">
    <!-- This container is dynamically filled by auth.js -->
   </div>
  </header>
  <main>
   <section class="pt-32 pb-20 bg-gray-900">
    <div class="container mx-auto px-6 text-center">
     <h1 class="text-4xl md:text-6xl font-extrabold text-white leading-tight mb-4">
      HatakeSocial
      <span class="block text-3xl md:text-5xl gradient-text mt-2">
       The Ultimate TCG Social Platform
      </span>
     </h1>
     <p class="text-lg md:text-xl text-gray-400 max-w-3xl mx-auto mb-8">
      Built by players, for players. The premier social hub for Trading Card Game enthusiasts. Connect, build, trade, and compete with a global community of Magic, Pok√©mon, and Yu-Gi-Oh! fans. Your TCG journey starts here.
     </p>
     <div class="flex flex-col items-center justify-center mb-8">
      <img alt="HatakeSocial Logo" class="h-80 w-auto mb-3" src="https://firebasestorage.googleapis.com/v0/b/hatakesocial-88b5e.firebasestorage.app/o/IMG_7951.png?alt=media&amp;token=e7c2dc48-2836-4feb-9fc7-324aecacba6b"/>
      <p class="text-sm text-gray-500 italic">
       Our logo is created by Richard Moreau
      </p>
     </div>
     <button class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold text-lg px-8 py-4 rounded-lg transition-transform transform hover:scale-105 inline-block" id="register-btn-hero">
      Join the Community
     </button>
    </div>
   </section>
   <section class="py-24 space-y-20">
    <div class="container mx-auto px-6 grid md:grid-cols-2 gap-12 items-center" id="feature-feed">
     <div class="md:pr-8">
      <h2 class="text-3xl font-bold text-white mb-4">
       The Heart of the Community: Your Social Feed
      </h2>
      <p class="text-gray-400 text-lg leading-relaxed mb-6">
       Dive into a dynamic feed buzzing with the latest from the TCG world. Share your latest pack openings, showcase your prized cards, and discuss metagame shifts with friends and followers. Our feed is your central hub for news, community content, and strategy discussions, tailored to the games you love.
      </p>
      <a class="text-indigo-400 font-semibold hover:text-indigo-300" href="#feature-deckbuilder">
       Explore the Deck Builder ‚Üí
      </a>
     </div>
     <div class="rounded-lg overflow-hidden shadow-2xl">
      <img alt="Screenshot of the HatakeSocial social feed in action." class="w-full h-full object-cover" src="https://i.imgur.com/tvJEQYU.png"/>
     </div>
    </div>
    <div class="container mx-auto px-6 grid md:grid-cols-2 gap-12 items-center" id="feature-deckbuilder">
     <div class="rounded-lg overflow-hidden shadow-2xl md:order-last">
      <img alt="Screenshot of the intuitive and powerful deck builder interface." class="w-full h-full object-cover" src="https://i.imgur.com/SLaX140.png"/>
     </div>
     <div class="md:pl-8">
      <h2 class="text-3xl font-bold text-white mb-4">
       Advanced Deck Builder
      </h2>
      <p class="text-gray-400 text-lg leading-relaxed mb-6">
       Unleash your creativity with our state-of-the-art deck building tool. Access comprehensive, up-to-date card databases for popular TCGs. Build and test your creations with an intuitive interface, get detailed analytics on your mana curve and card types, and share your masterpiece with the community or import popular meta decks with a single click.
      </p>
      <a class="text-indigo-400 font-semibold hover:text-indigo-300" href="#feature-collection">
       Track Your Collection ‚Üí
      </a>
     </div>
    </div>
    <div class="container mx-auto px-6 grid md:grid-cols-2 gap-12 items-center" id="feature-collection">
     <div class="md:pr-8">
      <h2 class="text-3xl font-bold text-white mb-4">
       Your Collection, Digitized
      </h2>
      <p class="text-gray-400 text-lg leading-relaxed mb-6">
       Digitize your physical collection with our powerful tracking tool. Easily add cards, monitor the value of your entire portfolio with real-time market data, and create detailed wantlists. Our collection tracker makes managing your assets and preparing for trades simpler and more organized than ever before.
      </p>
      <a class="text-indigo-400 font-semibold hover:text-indigo-300" href="#feature-marketplace">
       Visit the Marketplace ‚Üí
      </a>
     </div>
     <div class="rounded-lg overflow-hidden shadow-2xl">
      <img alt="Screenshot of a user's card collection page with value tracking." class="w-full h-full object-cover" src="https://i.imgur.com/1ehyX2h.png"/>
     </div>
    </div>
    <div class="container mx-auto px-6 grid md:grid-cols-2 gap-12 items-center" id="feature-marketplace">
     <div class="rounded-lg overflow-hidden shadow-2xl md:order-last">
      <img alt="Screenshot of the secure trading and marketplace interface." class="w-full h-full object-cover" src="https://i.imgur.com/QyFZZiJ.png"/>
     </div>
     <div class="md:pl-8">
      <h2 class="text-3xl font-bold text-white mb-4">
       Marketplace &amp; Secure Trading
      </h2>
      <p class="text-gray-400 text-lg leading-relaxed mb-6">
       Connect with players to buy, sell, and trade with confidence. Our integrated marketplace allows you to list singles or entire decks. The secure trading system, complete with user reviews and an escrow-like feature, ensures your valuable cards are protected throughout every transaction, fostering a safe and trustworthy community market.
      </p>
      <a class="text-indigo-400 font-semibold hover:text-indigo-300" href="#feature-events">
       Find an Event ‚Üí
      </a>
     </div>
    </div>
    <div class="container mx-auto px-6 grid md:grid-cols-2 gap-12 items-center" id="feature-events">
     <div class="md:pr-8">
      <h2 class="text-3xl font-bold text-white mb-4">
       Find Your Next Tournament
      </h2>
      <p class="text-gray-400 text-lg leading-relaxed mb-6">
       Ready to test your skills? Our tournament finder helps you discover local and online events. Filter by game, format, and location to find your next competition. From Friday Night Magic at your local game store to large-scale online championships, you'll never miss a chance to compete, win prizes, and make a name for yourself.
      </p>
      <a class="text-indigo-400 font-semibold hover:text-indigo-300" href="#community">
       Join the Community ‚Üí
      </a>
     </div>
     <div class="rounded-lg overflow-hidden shadow-2xl">
      <img alt="Screenshot of the event finder showing local tournaments on a map." class="w-full h-full object-cover" src="https://placehold.co/600x400/1f2937/4f46e5?text=Event+Finder+Map"/>
     </div>
    </div>
   </section>
   <section class="py-20 bg-gray-900">
    <div class="container mx-auto px-6 text-center">
     <h2 class="text-3xl md:text-4xl font-bold text-white">
      Explore Our Merchandise
     </h2>
     <p class="text-lg text-gray-400 max-w-2xl mx-auto mt-4 mb-8">
      Click here to view photos of our own merchandise brand, brought to you by top engineers of the TCG industry.
     </p>
     <button class="bg-pink-600 hover:bg-pink-700 text-white font-bold text-lg px-8 py-4 rounded-lg transition-transform transform hover:scale-105 inline-block" id="open-gallery-btn">
      View Photo Gallery
     </button>
    </div>
   </section>
   <section class="py-20 bg-gray-900/50" id="community">
    <div class="container mx-auto px-6 text-center">
     <h2 class="text-3xl md:text-4xl font-bold text-white">
      Ready to Join the Global TCG Community?
     </h2>
     <p class="text-lg text-gray-400 max-w-2xl mx-auto mt-4 mb-8">
      Your next favorite deck, your next rival, and your next tournament win are all waiting. Sign up for free and become part of the ultimate TCG social platform today.
     </p>
     <button class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold text-lg px-8 py-4 rounded-lg transition-transform transform hover:scale-105 inline-block" id="register-btn-cta">
      Create Your Free Account
     </button>
    </div>
   </section>
  </main>
  <footer class="bg-gray-900 border-t border-gray-800">
   <div class="container mx-auto px-6 py-8 text-center text-gray-400">
    <p>
     ¬© 2025 HatakeSocial. All rights reserved.
    </p>
    <div class="mt-4 space-x-6">
     <a class="hover:text-white transition-colors" href="about.html">
      About
     </a>
     <a class="hover:text-white transition-colors" href="contact.html">
      Contact
     </a>
     <a class="hover:text-white transition-colors" href="privacy.html">
      Privacy Policy
     </a>
     <a class="hover:text-white transition-colors" href="terms.html">
      Terms of Service
     </a>
    </div>
   </div>
  </footer>
  <div class="fixed inset-0 z-[1002] flex items-center justify-center hidden" id="gallery-modal">
   <div class="absolute inset-0 bg-black/80" id="gallery-backdrop">
   </div>
   <div class="relative flex flex-col items-center justify-center">
    <button class="absolute -top-12 -right-4 text-white hover:text-gray-300 z-10" id="close-gallery-modal">
     <i class="w-10 h-10" data-lucide="x-circle">
     </i>
    </button>
    <div class="relative mb-4">
     <img alt="Product Gallery Image" class="gallery-main-image rounded-lg shadow-xl" id="gallery-image" src=""/>
     <div class="gallery-arrow left" id="gallery-prev">
      <i class="w-8 h-8" data-lucide="chevron-left">
      </i>
     </div>
     <div class="gallery-arrow right" id="gallery-next">
      <i class="w-8 h-8" data-lucide="chevron-right">
      </i>
     </div>
    </div>
    <div id="gallery-thumbnails">
    </div>
   </div>
  </div>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js">
  </script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js">
  </script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js">
  </script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-storage-compat.js">
  </script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-functions-compat.js">
  </script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-analytics-compat.js">
  </script>
  <script src="js/auth.js">
  </script>
  <script src="js/darkmode.js">
  </script>
  <script>
   let deferredPrompt;
        const installBanner = document.getElementById('pwa-install-banner');
        const installBtn = document.getElementById('install-app-btn');
        const dismissBtn = document.getElementById('dismiss-install-btn');

        // Check if app is already installed or dismissed
        const isInstalled = localStorage.getItem('pwa-installed') === 'true';
        const isDismissed = localStorage.getItem('pwa-dismissed') === 'true';

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            if (!isInstalled && !isDismissed) {
                setTimeout(() => {
                    installBanner.style.display = 'block';
                }, 2000);
            }
        });

        installBtn.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                
                if (outcome === 'accepted') {
                    localStorage.setItem('pwa-installed', 'true');
                    installBanner.style.display = 'none';
                }
                
                deferredPrompt = null;
            } else {
                // Fallback instructions
                showInstallInstructions();
            }
        });

        dismissBtn.addEventListener('click', () => {
            localStorage.setItem('pwa-dismissed', 'true');
            installBanner.style.display = 'none';
        });

        function showInstallInstructions() {
            const userAgent = navigator.userAgent.toLowerCase();
            let instructions = '';
            
            if (userAgent.includes('iphone') || userAgent.includes('ipad')) {
                instructions = 'To install: Tap the Share button and select "Add to Home Screen"';
            } else if (userAgent.includes('android')) {
                instructions = 'To install: Tap the menu button and select "Add to Home Screen" or "Install App"';
            } else {
                instructions = 'To install: Look for the install icon in your browser\'s address bar or use "Install App" from the menu';
            }
            
            alert(instructions);
        }

        // Check if app was launched from home screen
        window.addEventListener('appinstalled', () => {
            localStorage.setItem('pwa-installed', 'true');
            installBanner.style.display = 'none';
        });

        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch(function(err) {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
  </script>
  <script>
   document.addEventListener('DOMContentLoaded', () => {
 ¬† ¬† ¬† ¬† ¬† ¬† lucide.createIcons();

 ¬† ¬† ¬† ¬† ¬† ¬† // --- Event Listeners for Buttons ---
 ¬† ¬† ¬† ¬† ¬† ¬† const registerBtnHero = document.getElementById('register-btn-hero');
 ¬† ¬† ¬† ¬† ¬† ¬† const registerBtnCta = document.getElementById('register-btn-cta');
 ¬† ¬† ¬† ¬† ¬† ¬† if (registerBtnHero) {
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† registerBtnHero.addEventListener('click', () => openModal(document.getElementById('registerModal')));
 ¬† ¬† ¬† ¬† ¬† ¬† }
 ¬† ¬† ¬† ¬† ¬† ¬† ¬†if (registerBtnCta) {
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† registerBtnCta.addEventListener('click', () => openModal(document.getElementById('registerModal')));
 ¬† ¬† ¬† ¬† ¬† ¬† }
 ¬† ¬† ¬† ¬† ¬† ¬†¬†
 ¬† ¬† ¬† ¬† ¬† ¬† // --- Gallery Modal Logic ---
 ¬† ¬† ¬† ¬† ¬† ¬† const galleryModal = document.getElementById('gallery-modal');
 ¬† ¬† ¬† ¬† ¬† ¬† const openGalleryBtn = document.getElementById('open-gallery-btn');
 ¬† ¬† ¬† ¬† ¬† ¬† const closeGalleryBtn = document.getElementById('close-gallery-modal');
 ¬† ¬† ¬† ¬† ¬† ¬† const galleryBackdrop = document.getElementById('gallery-backdrop');
 ¬† ¬† ¬† ¬† ¬† ¬† const galleryImage = document.getElementById('gallery-image');
 ¬† ¬† ¬† ¬† ¬† ¬† const prevBtn = document.getElementById('gallery-prev');
 ¬† ¬† ¬† ¬† ¬† ¬† const nextBtn = document.getElementById('gallery-next');
 ¬† ¬† ¬† ¬† ¬† ¬† const thumbnailsContainer = document.getElementById('gallery-thumbnails');

 ¬† ¬† ¬† ¬† ¬† ¬† let imageUrls = [];
 ¬† ¬† ¬† ¬† ¬† ¬† let currentIndex = 0;

 ¬† ¬† ¬† ¬† ¬† ¬† function populateThumbnails() {
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† thumbnailsContainer.innerHTML = '';
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† imageUrls.forEach((url, index) => {
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† const thumb = document.createElement('img');
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† thumb.src = url;
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† thumb.classList.add('gallery-thumbnail');
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† thumb.dataset.index = index;
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† thumb.addEventListener('click', () => showImage(index));
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† thumbnailsContainer.appendChild(thumb);
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† });
 ¬† ¬† ¬† ¬† ¬† ¬† }

 ¬† ¬† ¬† ¬† ¬† ¬† async function fetchProductImages() {
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† if (imageUrls.length > 0) return;
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† try {
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† const productsSnapshot = await firebase.firestore().collection('products').get();
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† let allUrls = [];
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† productsSnapshot.forEach(doc => {
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† const product = doc.data();
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† if (product.galleryImageUrls && Array.isArray(product.galleryImageUrls)) {
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† allUrls = allUrls.concat(product.galleryImageUrls.filter(url => typeof url === 'string' && url.startsWith('http')));
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† });
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† imageUrls = [...new Set(allUrls)];¬†
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† populateThumbnails();
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† } catch (error) {
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† console.error("Error fetching product images:", error);
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }
 ¬† ¬† ¬† ¬† ¬† ¬† }

 ¬† ¬† ¬† ¬† ¬† ¬† function showImage(index) {
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† if (imageUrls.length === 0) return;
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† currentIndex = (index + imageUrls.length) % imageUrls.length;
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† galleryImage.src = imageUrls[currentIndex];

 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† const thumbnails = thumbnailsContainer.querySelectorAll('.gallery-thumbnail');
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† thumbnails.forEach((thumb, i) => {
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† thumb.classList.toggle('active', i === currentIndex);
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† });
 ¬† ¬† ¬† ¬† ¬† ¬† }

 ¬† ¬† ¬† ¬† ¬† ¬† function openGalleryModal() {
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†if (imageUrls.length === 0) {
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†showToast("No merchandise images available yet.", "info");
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†return;
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†}
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†galleryModal.classList.remove('hidden');
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†galleryModal.classList.add('flex');
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†showImage(0);
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†document.addEventListener('keydown', handleKeyPress);
 ¬† ¬† ¬† ¬† ¬† ¬† }
 ¬† ¬† ¬† ¬† ¬† ¬†¬†
 ¬† ¬† ¬† ¬† ¬† ¬† function closeGalleryModal() {
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† galleryModal.classList.add('hidden');
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† galleryModal.classList.remove('flex');
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† document.removeEventListener('keydown', handleKeyPress);
 ¬† ¬† ¬† ¬† ¬† ¬† }

 ¬† ¬† ¬† ¬† ¬† ¬† function handleKeyPress(e) {
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† if (e.key === 'ArrowRight') showImage(currentIndex + 1);
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† else if (e.key === 'ArrowLeft') showImage(currentIndex - 1);
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† else if (e.key === 'Escape') closeGalleryModal();
 ¬† ¬† ¬† ¬† ¬† ¬† }

 ¬† ¬† ¬† ¬† ¬† ¬† openGalleryBtn.addEventListener('click', async () => {
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† await fetchProductImages();
 ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† openGalleryModal();
 ¬† ¬† ¬† ¬† ¬† ¬† });
 ¬† ¬† ¬† ¬† ¬† ¬†¬†
 ¬† ¬† ¬† ¬† ¬† ¬† closeGalleryBtn.addEventListener('click', closeGalleryModal);
 ¬† ¬† ¬† ¬† ¬† ¬† galleryBackdrop.addEventListener('click', closeGalleryModal);
 ¬† ¬† ¬† ¬† ¬† ¬† prevBtn.addEventListener('click', () => showImage(currentIndex - 1));
 ¬† ¬† ¬† ¬† ¬† ¬† nextBtn.addEventListener('click', () => showImage(currentIndex + 1));
 ¬† ¬† ¬† ¬† });
  </script>
  <div class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50" id="loginModal">
   <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6">
    <div class="flex justify-between items-center">
     <h2 class="text-xl font-bold">
      Login
     </h2>
     <button class="text-gray-500 hover:text-gray-800 dark:hover:text-white text-2xl font-bold" id="closeLoginModal">
      √ó
     </button>
    </div>
    <form class="mt-4 space-y-4" id="loginForm">
     <input class="w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600" id="loginEmail" placeholder="Email" required="" type="email"/>
     <input class="w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600" id="loginPassword" placeholder="Password" required="" type="password"/>
     <p class="text-red-500 text-sm hidden" id="login-error-message">
     </p>
     <button class="w-full bg-blue-600 text-white font-semibold py-2 rounded-md hover:bg-blue-700" type="submit">
      Login
     </button>
     <button class="w-full bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-semibold py-2 rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 flex items-center justify-center" id="googleLoginButton" type="button">
      <img alt="Google icon" class="w-5 h-5 mr-2" src="https://www.svgrepo.com/show/475656/google-color.svg"/>
      Sign in with Google
     </button>
    </form>
   </div>
  </div>
  <div class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50" id="registerModal">
   <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6">
    <div class="flex justify-between items-center">
     <h2 class="text-xl font-bold">
      Register
     </h2>
     <button class="text-gray-500 hover:text-gray-800 dark:hover:text-white text-2xl font-bold" id="closeRegisterModal">
      √ó
     </button>
    </div>
    <form class="mt-4 space-y-4" id="registerForm">
     <input class="w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600" id="registerEmail" placeholder="Email" required="" type="email"/>
     <input class="w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600" id="registerPassword" placeholder="Password" required="" type="password"/>
     <input class="w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600" id="registerCity" placeholder="City" type="text"/>
     <input class="w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600" id="registerCountry" placeholder="Country" type="text"/>
     <input class="w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600" id="registerFavoriteTcg" placeholder="Favorite TCG" type="text"/>
     <p class="text-red-500 text-sm hidden" id="register-error-message">
     </p>
     <button class="w-full bg-blue-600 text-white font-semibold py-2 rounded-md hover:bg-blue-700" type="submit">
      Register
     </button>
     <button class="w-full bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-semibold py-2 rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 flex items-center justify-center" id="googleRegisterButton" type="button">
      <img alt="Google icon" class="w-5 h-5 mr-2" src="https://www.svgrepo.com/show/475656/google-color.svg"/>
      Register with Google
     </button>
    </form>
   </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/shepherd.js@10.0.1/dist/js/shepherd.min.js">
  </script>
  <link href="https://cdn.jsdelivr.net/npm/shepherd.js@10.0.1/dist/css/shepherd.css" rel="stylesheet"/>
  <script src="/js/tour.js" type="module">
  </script>
 </body>
</html>
