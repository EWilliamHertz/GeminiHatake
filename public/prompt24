1. We still cannot upload pictures and save the card. This is what it says in the database:
Access to XMLHttpRequest at 'https://firebasestorage.googleapis.com/v0/b/hatakesocial-88b5e.appspot.com/o?name=users%2Fx2aA4S7oGJhsBir61yJonFLIqTM2%2Fcollection_images%2FArGPKFA1R8gVHXDi65ZV%2FIMG_5405.webp' from origin 'https://hatakesocial-88b5e.firebaseapp.com/' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: It does not have HTTP ok status.Understand this error
firebasestorage.googleapis.com/v0/b/hatakesocial-88b5e.appspot.com/o?name=users%2Fx2aA4S7oGJhsBir61yJonFLIqTM2%2Fcollection_images%2FArGPKFA1R8gVHXDi65ZV%2FIMG_5405.webp:1  Failed to load resource: net::ERR_FAILED
2. We cannot add cards to the collection, it says invalid data, this is what it says in console: collection-app.js:142 Error saving card: FirebaseError: Function addDoc() called with invalid data. Unsupported field value: undefined (found in field api_id in document users/x2aA4S7oGJhsBir61yJonFLIqTM2/collection/h36olDo0kJyPWUDEMILr)
    at jl (index.esm2017.js:16447:16)
    at El.Ua (index.esm2017.js:16050:16)
    at index.esm2017.js:16364:17
    at Ml (index.esm2017.js:16322:12)
    at index.esm2017.js:16381:19
    at $r (index.esm2017.js:961:70)
    at Pl (index.esm2017.js:16380:63)
    at Sl (index.esm2017.js:16093:15)
    at index.esm2017.js:17540:20
    at Hd.add (database.ts:1273:12)
handleCardFormSubmit    @    collection-app.js:142
3. We cannot edit cards:
'https://firebasestorage.googleapis.com/v0/b/hatakesocial-88b5e.appspot.com/o?name=users%2Fx2aA4S7oGJhsBir61yJonFLIqTM2%2Fcollection_images%2FArGPKFA1R8gVHXDi65ZV%2FIMG_5405.webp' from origin 'https://hatakesocial-88b5e.firebaseapp.com/' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: It does not have HTTP ok status.Understand this error
connection.ts:81  POST https://firebasestorage.googleapis.com/v0/b/hatakesocial-88b5e.appspot.com/o?name=users%2Fx2aA4S7oGJhsBir61yJonFLIqTM2%2Fcollection_images%2FArGPKFA1R8gVHXDi65ZV%2FIMG_5405.webp net::ERR_FAILED
4. The hover is supposed to create a small rectangle card from your cursor that is an enlargened version of the card. That still doesn't happen in search or in my_collection.
5. All the Magic cards still say N/A or 0. It hasn't worked since we implemented currency change, but the Pokemon cards have prices.
6. Can you take the currency changer from the header here and put it in the above python script?
<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>My Collection - HatakeSocial</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
    <link href="css/style.css" rel="stylesheet"/>
    <script>
        tailwind.config = {
            darkMode: 'class',
            plugins: [
                function ({ addVariant }) {
                    addVariant('has-[:checked]', '&:has(:checked)')
                }
            ]
        };
    </script>
    <link href="/manifest.json" rel="manifest"/>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-200 font-sans overflow-hidden">
<div class="flex h-screen">
    <div class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden lg:hidden" id="sidebar-overlay"></div>
    <aside class="w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex-shrink-0 flex flex-col fixed inset-y-0 left-0 z-50 lg:relative lg:translate-x-0 -translate-x-full transition-transform duration-300 ease-in-out" id="sidebar">
        <div class="h-28 flex items-center justify-center border-b border-gray-200 dark:border-gray-700 px-4">
            <a class="flex flex-col items-center space-y-1" href="app.html">
                <img alt="HatakeSocial Logo" class="h-16" src="https://i.imgur.com/B06rBhI.png"/>
                <span class="font-bold text-lg text-blue-600 dark:text-blue-400">HatakeSocial</span>
            </a>
        </div>
    <nav class="flex-1 px-4 py-6 space-y-2 overflow-y-auto">
     <a class="flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md" href="app.html">
      <i class="fas fa-home w-6 text-center">
      </i>
      <span class="ml-3">
       Feed
      </span>
     </a>
     <a class="flex items-center px-4 py-2 bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 rounded-md" href="messages.html">
      <i class="fas fa-comments w-6 text-center">
      </i>
      <span class="ml-3">
       Messages
      </span>
     </a>
     <a class="flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md" href="community.html">
      <i class="fas fa-users w-6 text-center">
      </i>
      <span class="ml-3">
       Community
      </span>
     </a>
     <a class="flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md" href="articles.html?type=tcg">
      <i class="fas fa-newspaper w-6 text-center">
      </i>
      <span class="ml-3">
       TCG Articles
      </span>
     </a>
     <a class="flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md" href="articles.html?type=blog">
      <i class="fas fa-blog w-6 text-center">
      </i>
      <span class="ml-3">
       Hatake Blog
      </span>
     </a>
     <a class="flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md" href="events.html">
      <i class="fas fa-calendar-alt w-6 text-center">
      </i>
      <span class="ml-3">
       Events
      </span>
     </a>
     <a class="flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md" href="my_collection.html">
      <i class="fas fa-layer-group w-6 text-center">
      </i>
      <span class="ml-3">
       My Collection
      </span>
     </a>
     <a class="flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md" href="deck.html">
      <i class="fas fa-book-open w-6 text-center">
      </i>
      <span class="ml-3">
       Deck Builder
      </span>
     </a>
     <a class="flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md" href="shop.html">
      <i class="fas fa-shopping-cart w-6 text-center">
      </i>
      <span class="ml-3">
       Shop
      </span>
     </a>
     <a class="flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md" href="marketplace.html">
      <i class="fas fa-store w-6 text-center">
      </i>
      <span class="ml-3">
       Marketplace
      </span>
     </a>
     <a class="flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md" href="trades.html">
      <i class="fas fa-exchange-alt w-6 text-center">
      </i>
      <span class="ml-3">
       Trades
      </span>
     </a>
     <a class="flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md" href="profile.html">
      <i class="fas fa-user w-6 text-center">
      </i>
      <span class="ml-3">
       Profile
      </span>
     </a>
     <a class="flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md" href="settings.html">
      <i class="fas fa-cog w-6 text-center">
      </i>
      <span class="ml-3">
       Settings
      </span>
     </a>
     <a class="flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md" href="about.html">
      <i class="fas fa-info-circle w-6 text-center">
      </i>
      <span class="ml-3">
       About Us
      </span>
     </a>
    </nav>     <div class="px-4 py-4 border-t border-gray-200 dark:border-gray-700">
            <div id="auth-container-sidebar"></div>
        </div>
    </aside>

    <div class="flex-1 flex flex-col overflow-hidden">
        <header class="h-28 flex items-center justify-between px-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0">
            <div class="flex items-center">
                <button class="lg:hidden mr-4 text-gray-600 dark:text-gray-300" id="sidebar-toggle">
                    <i class="fas fa-bars text-xl"></i>
                </button>
                <h1 class="text-2xl font-bold">My Collection</h1>
            </div>
            <div class="flex items-center space-x-5" id="user-actions"></div>
        </header>

        <main class="flex-1 overflow-hidden flex">
            <div class="w-full md:w-80 bg-white dark:bg-gray-800 border-r dark:border-gray-700 p-6 flex-shrink-0 flex flex-col overflow-y-auto">
                <div class="mb-6">
                    <h3 id="stats-title" class="text-lg font-semibold mb-3">Statistics</h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between"><span id="stats-total-label">Total Cards:</span> <span id="stats-total-cards" class="font-mono">0</span></div>
                        <div class="flex justify-between"><span id="stats-unique-label">Unique Cards:</span> <span id="stats-unique-cards" class="font-mono">0</span></div>
                        <div class="flex justify-between"><span id="stats-value-label">Total Value:</span> <span id="stats-total-value" class="font-mono">$0.00</span></div>
                    </div>
                </div>
                <div class="mb-6 flex-1">
                    <h3 class="text-lg font-semibold mb-3">Filters</h3>
                    <div class="space-y-4">
                        <input type="text" id="filter-name" placeholder="Filter by name..." class="w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <select id="filter-set" class="w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600"><option value="">All Sets</option></select>
                        <select id="filter-rarity" class="w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600"><option value="">All Rarities</option></select>
                        <div>
                            <label class="text-sm">Colors (Magic)</label>
                            <div id="filter-colors" class="flex justify-around mt-2 text-2xl">
                                <i class="fas fa-circle text-gray-400 cursor-pointer" data-color="W" title="White"></i>
                                <i class="fas fa-tint text-gray-400 cursor-pointer" data-color="U" title="Blue"></i>
                                <i class="fas fa-skull text-gray-400 cursor-pointer" data-color="B" title="Black"></i>
                                <i class="fas fa-fire text-gray-400 cursor-pointer" data-color="R" title="Red"></i>
                                <i class="fas fa-leaf text-gray-400 cursor-pointer" data-color="G" title="Green"></i>
                                <i class="fas fa-gem text-gray-400 cursor-pointer" data-color="C" title="Colorless"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-3">Actions</h3>
                    <div class="space-y-2">
                        <button id="add-card-btn" class="w-full text-left flex items-center p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"><i class="fas fa-plus w-6"></i> Add Card</button>
                        <button id="bulk-edit-btn" class="w-full text-left flex items-center p-2 bg-gray-200 dark:bg-gray-700 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600"><i class="fas fa-edit w-6"></i> Bulk Edit</button>
                    </div>
                </div>
            </div>

            <div class="flex-1 flex flex-col overflow-hidden p-6">
                <div class="flex-shrink-0 mb-4">
                    <div class="flex flex-wrap justify-between items-center gap-4">
                        <div class="flex space-x-1 bg-gray-200 dark:bg-gray-700 p-1 rounded-full text-sm font-semibold">
                            <button data-tab="collection" class="tab-button flex-1 px-4 py-2 rounded-full active">Collection</button>
                            <button data-tab="wishlist" class="tab-button flex-1 px-4 py-2 rounded-full">Wishlist</button>
                        </div>
                        <div id="tcg-filter-buttons" class="flex space-x-1 bg-gray-200 dark:bg-gray-700 p-1 rounded-full text-sm font-semibold">
                            <button data-game="all" class="tcg-filter-button flex-1 px-4 py-2 rounded-full active">All</button>
                            <button data-game="mtg" class="tcg-filter-button flex-1 px-4 py-2 rounded-full">Magic</button>
                            <button data-game="pokemon" class="tcg-filter-button flex-1 px-4 py-2 rounded-full">Pokémon</button>
                        </div>
                        <div class="flex items-center space-x-4">
                            <div class="flex items-center bg-gray-200 dark:bg-gray-700 rounded-full p-1">
                                <button id="view-toggle-grid" class="p-2 rounded-full text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-900 shadow"><i class="fas fa-th-large"></i></button>
                                <button id="view-toggle-list" class="p-2 rounded-full text-gray-500 dark:text-gray-400"><i class="fas fa-list"></i></button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="bulk-edit-toolbar" class="hidden mb-4 p-4 rounded-lg bg-blue-100 dark:bg-blue-900/50 shadow-md flex items-center justify-between gap-4">
                    <div class="flex items-center gap-4">
                        <p class="text-sm font-semibold text-blue-800 dark:text-blue-200">
                           <span id="bulk-selected-count">0</span> selected
                        </p>
                         <button id="bulk-select-all-btn" class="btn btn-sm bg-blue-200 text-blue-800 hover:bg-blue-300">Select All</button>
                    </div>
                    <div class="flex items-center space-x-2">
                        <button id="bulk-list-btn" class="btn btn-success">
                            <i class="fas fa-tag mr-2"></i>List for Sale
                        </button>
                        <button id="bulk-delete-btn" class="btn bg-red-500 hover:bg-red-600 text-white">
                            <i class="fas fa-trash mr-2"></i>Delete Selected
                        </button>
                    </div>
                </div>

                <div id="collection-display" class="flex-1 overflow-y-auto">
                    <div class="flex items-center justify-center h-full text-gray-500"><p>Loading your collection...</p></div>
                </div>
            </div>
        </main>
    </div>
</div>

<div id="toast-container" class="fixed bottom-5 right-5 z-[1003]"></div>

<div id="card-preview-tooltip" class="fixed z-[1005] pointer-events-none hidden rounded-xl shadow-lg border-4 border-gray-400" style="width: 260px;">
    <img src="" alt="Card Preview" class="w-full rounded-lg">
</div>

<div id="search-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden items-start justify-center z-[1001] pt-16">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl flex flex-col" style="height: 80vh;">
        <div class="p-4 border-b dark:border-gray-700 flex items-center">
            <div class="relative flex-grow mr-4">
                <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                <input type="text" id="card-search-input" placeholder="Search for a card..." class="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-full bg-gray-50 dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            <select id="game-selector" class="p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600">
                <option value="mtg">Magic: The Gathering</option>
                <option value="pokemon">Pokémon</option>
            </select>
            <button id="close-search-modal" class="ml-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-2xl font-bold">&times;</button>
        </div>
        <div id="search-results-container" class="p-6 flex-grow overflow-y-auto">
            <p class="text-center text-gray-500">Search results will appear here.</p>
        </div>
    </div>
</div>

<div id="card-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden items-center justify-center z-[1002]">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl flex" style="max-height: 90vh;">
        <div class="w-1/3 p-6 bg-gray-100 dark:bg-gray-900 rounded-l-lg flex items-center justify-center">
            <img id="card-modal-image" src="https://placehold.co/300x420?text=Card+Image" class="max-w-full max-h-full rounded-lg object-contain">
        </div>
        <div class="w-2/3 p-6 flex flex-col">
            <form id="card-form" class="flex flex-col h-full">
                <input type="hidden" id="card-modal-id">
                <input type="hidden" id="card-api-id">
                <div class="flex justify-between items-start">
                    <div>
                        <h2 id="card-modal-title" class="text-2xl font-bold">Add New Card</h2>
                        <p id="card-modal-subtitle" class="text-sm text-gray-500">Details for this version</p>
                    </div>
                    <button type="button" id="close-card-modal" class="text-gray-500 hover:text-gray-800 dark:hover:text-white text-2xl font-bold">&times;</button>
                </div>
                <div class="flex-grow overflow-y-auto pr-2">
                    <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div><label for="card-quantity" class="block text-sm font-medium">Quantity</label><input type="number" id="card-quantity" value="1" min="1" class="mt-1 w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600"></div>
                        <div><label for="card-condition" class="block text-sm font-medium">Condition</label><select id="card-condition" class="mt-1 w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600"><option>Near Mint</option><option>Lightly Played</option><option>Moderately Played</option><option>Heavily Played</option><option>Damaged</option></select></div>
                        <div><label for="card-language" class="block text-sm font-medium">Language</label><select id="card-language" class="mt-1 w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600"><option>English</option><option>Japanese</option><option>French</option><option>German</option><option>Spanish</option><option>Italian</option><option>Portuguese</option><option>Russian</option><option>Korean</option><option>Chinese (Simplified)</option><option>Chinese (Traditional)</option></select></div>
                        <div><label for="card-purchase-price" class="block text-sm font-medium">Purchase Price ($)</label><input type="number" step="0.01" id="card-purchase-price" placeholder="0.00" class="mt-1 w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600"></div>
                    </div>
                    <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                        <label class="flex items-center"><input type="checkbox" id="card-is-foil" class="mr-2"> Foil</label>
                        <label class="flex items-center"><input type="checkbox" id="card-is-signed" class="mr-2"> Signed</label>
                        <label class="flex items-center"><input type="checkbox" id="card-is-altered" class="mr-2"> Altered</label>
                    </div>
                    <div class="mt-4">
                        <label for="custom-image-upload" class="block text-sm font-medium">Custom Image (optional)</label>
                        <input type="file" id="custom-image-upload" accept="image/*" class="mt-1 w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600">
                    </div>
                    <div class="mt-4">
                        <label class="flex items-center">
                            <input type="checkbox" id="list-for-sale-toggle" class="mr-2">
                            List for Sale
                        </label>
                        <div id="list-for-sale-section" class="hidden mt-2 p-3 bg-gray-50 dark:bg-gray-700 rounded-md">
                            <div class="mb-2">
                                <span class="text-sm text-gray-600 dark:text-gray-400">Market Price: </span>
                                <span id="market-price-display" class="font-semibold">$0.00</span>
                            </div>
                            <div class="grid grid-cols-2 gap-2">
                                <div>
                                    <label for="card-sale-percentage" class="block text-sm font-medium">% of Market</label>
                                    <div class="flex items-center">
                                        <input type="number" id="card-sale-percentage" value="100" min="1" max="500" class="flex-1 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600">
                                        <span class="ml-1 text-sm">%</span>
                                    </div>
                                </div>
                                <div class="flex-1">
                                    <label for="card-sale-price" class="block text-sm font-medium">Or set fixed price ($)</label>
                                    <input type="number" step="0.01" id="card-sale-price" placeholder="0.00" class="mt-1 w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="pending-cards-container" class="mt-4 border-t pt-2"></div>
                </div>
                <div class="mt-auto pt-4 flex justify-end items-center space-x-3 flex-shrink-0">
                    <button type="button" id="add-another-version-btn" class="px-4 py-2 bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500">Add This Version</button>
                    <button type="submit" id="save-card-btn" class="px-6 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700">Add to Collection</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div id="bulk-list-sale-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-2xl p-6 w-full max-w-md">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-bold">List <span id="bulk-list-count">0</span> Cards for Sale</h3>
            <button id="close-bulk-list-sale-modal" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                <i class="fas fa-times fa-lg"></i>
            </button>
        </div>
        <form id="bulk-list-form">
            <div class="space-y-4">
                <p class="text-sm text-gray-600 dark:text-gray-400">Choose how to price the selected cards.</p>
                
                <div class="space-y-2">
                    <label class="flex items-center p-3 rounded-lg border dark:border-gray-600 has-[:checked]:bg-blue-50 dark:has-[:checked]:bg-blue-900/50">
                        <input type="radio" name="price-option" value="percentage" checked class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <span class="ml-3 text-sm font-medium">Set Price by % of Market Value</span>
                    </label>
                     <label class="flex items-center p-3 rounded-lg border dark:border-gray-600 has-[:checked]:bg-blue-50 dark:has-[:checked]:bg-blue-900/50">
                        <input type="radio" name="price-option" value="fixed" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <span class="ml-3 text-sm font-medium">Set a Fixed Price for all cards</span>
                    </label>
                    <label class="flex items-center p-3 rounded-lg border dark:border-gray-600 has-[:checked]:bg-blue-50 dark:has-[:checked]:bg-blue-900/50">
                        <input type="radio" name="price-option" value="individual" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <span class="ml-3 text-sm font-medium">Keep Individual Prices (if set)</span>
                    </label>
                </div>

                <div id="bulk-price-percentage-group">
                    <label for="bulk-price-percentage" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Market Value Percentage (%)</label>
                    <input type="number" id="bulk-price-percentage" name="percentage" value="100" class="mt-1 w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600" placeholder="e.g., 90 for 90%">
                </div>
                 <div id="bulk-price-fixed-group" class="hidden">
                    <label for="bulk-price-fixed" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Fixed Price ($)</label>
                    <input type="number" step="0.01" id="bulk-price-fixed" name="fixed-price" class="mt-1 w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600" placeholder="e.g., 5.00">
                </div>
            </div>
            <div class="mt-6 flex justify-end">
                <button type="submit" class="btn btn-primary">Apply and List Cards</button>
            </div>
        </form>
    </div>
</div>

<div id="bulk-review-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden items-center justify-center z-[1003]">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl flex flex-col" style="height: 90vh;">
        <div class="flex justify-between items-center p-4 border-b dark:border-gray-700">
            <h2 class="text-xl font-bold">Review and Price Items for Sale</h2>
            <button id="close-bulk-review-modal" class="text-gray-500 hover:text-gray-800 dark:hover:text-white text-2xl font-bold">&times;</button>
        </div>
        <div class="p-4 bg-gray-50 dark:bg-gray-700/50 border-b dark:border-gray-700">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label for="bulk-apply-percentage" class="block text-sm font-medium">Apply % to All</label>
                    <div class="flex items-center">
                        <input type="number" id="bulk-apply-percentage-input" class="mt-1 w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600" placeholder="e.g., 75">
                        <button id="bulk-apply-percentage-btn" class="ml-2 btn btn-primary">%</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="bulk-review-list" class="flex-grow overflow-y-auto p-4 space-y-2">
        </div>
        <div class="p-4 border-t dark:border-gray-700">
            <button id="finalize-bulk-list-btn" class="btn btn-success w-full">Finalize and List Selected Cards</button>
        </div>
    </div>
</div>

<div class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50" id="loginModal">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6"><div class="flex justify-between items-center"><h2 class="text-xl font-bold">Login</h2><button class="text-gray-500 hover:text-gray-800 dark:hover:text-white text-2xl font-bold" id="closeLoginModal">&times;</button></div><form class="mt-4 space-y-4" id="loginForm"><input class="w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600" id="loginEmail" placeholder="Email" required type="email"><input class="w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600" id="loginPassword" placeholder="Password" required type="password"><p class="text-red-500 text-sm hidden" id="login-error-message"></p><button class="w-full bg-blue-600 text-white font-semibold py-2 rounded-md hover:bg-blue-700" type="submit">Login</button><button class="w-full bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-semibold py-2 rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 flex items-center justify-center" id="googleLoginButton" type="button"><img alt="Google icon" class="w-5 h-5 mr-2" src="https://www.svgrepo.com/show/475656/google-color.svg">Sign in with Google</button></form></div>
</div>
<div class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50" id="registerModal">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6"><div class="flex justify-between items-center"><h2 class="text-xl font-bold">Register</h2><button class="text-gray-500 hover:text-gray-800 dark:hover:text-white text-2xl font-bold" id="closeRegisterModal">&times;</button></div><form class="mt-4 space-y-4" id="registerForm"><input class="w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600" id="registerEmail" placeholder="Email" required type="email"><input class="w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600" id="registerPassword" placeholder="Password" required type="password"><input class="w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600" id="registerCity" placeholder="City" type="text"><input class="w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600" id="registerCountry" placeholder="Country" type="text"><input class="w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600" id="registerFavoriteTcg" placeholder="Favorite TCG" type="text"><p class="text-red-500 text-sm hidden" id="register-error-message"></p><button class="w-full bg-blue-600 text-white font-semibold py-2 rounded-md hover:bg-blue-700" type="submit">Register</button><button class="w-full bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-semibold py-2 rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 flex items-center justify-center" id="googleRegisterButton" type="button"><img alt="Google icon" class="w-5 h-5 mr-2" src="https://www.svgrepo.com/show/475656/google-color.svg">Register with Google</button></form></div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-storage-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-functions-compat.js"></script>

<script src="js/auth.js"></script>
<script src="js/darkmode.js"></script>
<script src="js/messenger.js"></script>
<script type="module" src="js/modules/collection-app.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebar-toggle');
        const sidebarOverlay = document.getElementById('sidebar-overlay');
        if (sidebarToggle) {
            sidebarToggle.addEventListener('click', () => {
                sidebar.classList.toggle('-translate-x-full');
                sidebarOverlay.classList.toggle('hidden');
            });
        }
        if (sidebarOverlay) {
            sidebarOverlay.addEventListener('click', () => {
                sidebar.classList.add('-translate-x-full');
                sidebarOverlay.classList.add('hidden');
            });
        }
    });
</script>
</body>
</html>

We want that in all html files except terms, privacy and index.html.
It did fail to update some pages:
ewilliamhe@cloudshell:~/GeminiHatake (hatakesocial-88b5e)$ nano headers.py
ewilliamhe@cloudshell:~/GeminiHatake (hatakesocial-88b5e)$ python headers.py
Successfully extracted header from app.html
Warning: Skipping index.html, could not find main content div.
Warning: Skipping about.html, could not find main content div.
Updated header in: bulk_add.html
Warning: Skipping auth.html, could not find main content div.
Warning: Skipping offline.html, could not find main content div.
Updated header in: my_collection.html
Warning: Skipping notifications.html, could not find main content div.
Updated header in: messages.html
Warning: Skipping community.html, could not find main content div.
Updated header in: articles.html
Updated header in: settings.html
Warning: Skipping trades.html, could not find main content div.
Updated header in: search.html
Warning: Skipping referrals.html, could not find main content div.
Warning: Skipping card-view.html, could not find main content div.
Updated header in: messages_original.html
Warning: Skipping partner.html, could not find main content div.
Updated header in: create-article.html
Warning: Skipping deck.html, could not find main content div.
Updated header in: admin.html
Updated header in: events.html
Warning: Skipping contact.html, could not find main content div.
Warning: Skipping shop.html, could not find main content div.
Warning: No <header> found in marketplace.html. The file was not modified.
Warning: Skipping profile.html, could not find main content div.
Updated header in: edit-article.html
Warning: Skipping booster.html, could not find main content div.
Warning: Skipping gallery.html, could not find main content div.
Warning: Skipping view-article.html, could not find main content div.

Header standardization complete. Updated 11 files.